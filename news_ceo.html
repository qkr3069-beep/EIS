<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>OmniCare · CEO News Picker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css" />
  <style>
    html,body{ font-family:"Pretendard Variable", Pretendard, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .card { border:1px solid #e5e7eb; border-radius:16px; background:#fff; box-shadow:0 8px 24px rgba(15,23,42,.06); }
    .chip { border:1px solid #e5e7eb; border-radius:999px; padding:.25rem .6rem; font-size:.8rem; color:#334155; background:#f8fafc; }
    .muted{ color:#64748b; }
    .btn { border:1px solid #e5e7eb; background:#0f172a; color:#fff; border-radius:12px; padding:.55rem .9rem; font-weight:700; }
    .btn2 { border:1px solid #e5e7eb; background:#fff; color:#0f172a; border-radius:12px; padding:.55rem .9rem; font-weight:700; }
    .divider{ height:1px; background:#e5e7eb; }
    .small { font-size:.85rem; }
    input[type="date"]{ color:#0f172a; }
    .news-link{ color:#0f172a; font-weight:800; }
    .news-link:hover{ text-decoration:underline; }
    .badge-load{ border:1px solid #e5e7eb; background:#f8fafc; color:#334155; border-radius:999px; padding:.15rem .55rem; font-size:.75rem; font-weight:800; }
    .badge-ok{ border:1px solid #bbf7d0; background:#ecfdf5; color:#065f46; border-radius:999px; padding:.15rem .55rem; font-size:.75rem; font-weight:800; }
    .badge-err{ border:1px solid #fecaca; background:#fff1f2; color:#9f1239; border-radius:999px; padding:.15rem .55rem; font-size:.75rem; font-weight:800; }

    .pickRow{ display:flex; gap:10px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap; }
    .pickBtn{
      border:1px solid #e5e7eb; background:#fff; color:#0f172a;
      border-radius:12px; padding:.45rem .75rem; font-weight:900; font-size:.85rem; white-space:nowrap;
    }
    .pickBtn:hover{ background:#f8fafc; }
    .pickBtn.active{ border-color:#0f172a; background:#0f172a; color:#fff; }

    .pickedTag{
      display:inline-flex; align-items:center; gap:6px;
      border:1px solid #bbf7d0; background:#ecfdf5; color:#065f46;
      border-radius:999px; padding:.18rem .55rem; font-size:.75rem; font-weight:900; white-space:nowrap;
    }
    .pickedTag .x{
      border:1px solid #a7f3d0; border-radius:999px; padding:0 .35rem; line-height:1.4;
      font-weight:900; cursor:pointer;
    }
    .pickedTag .x:hover{ background:#d1fae5; }

    .toast{
      position:fixed; right:14px; bottom:14px; z-index:60;
      background:#0f172a; color:#fff; border-radius:14px;
      padding:10px 12px; font-weight:800; font-size:.9rem;
      box-shadow:0 10px 26px rgba(15,23,42,.22);
      display:none;
      max-width: calc(100vw - 28px);
    }
    .toast.show{ display:block; }

    .stickyBar{ position:sticky; top:72px; z-index:15; }
    @media (max-width: 768px){ .stickyBar{ top:112px; } }
  </style>
</head>

<body class="bg-slate-50 text-slate-900 min-h-screen">
  <header class="sticky top-0 z-20 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-[1440px] mx-auto px-2 py-3 flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
      <div class="flex items-center gap-3">
        <a href="https://qkr3069-beep.github.io/EIS/" aria-label="메인으로 이동" class="shrink-0">
          <img src="omnicare_logo.png" alt="옴니케어 로고" class="h-12 md:h-14 object-contain cursor-pointer" />
        </a>
        <div>
          <div class="font-semibold text-slate-900">OmniCare · CEO News Picker</div>
          <div class="text-sm muted">news 페이지 기사에서 3개를 선택해 Main(국보급 소식)에 반영</div>
        </div>
      </div>

      <div class="flex items-center gap-2 flex-wrap justify-end">
        <button class="btn2 text-sm" onclick="location.href='ceo.html'">← CEO 페이지</button>
        <a href="news.html" class="btn2 text-sm">news 페이지 보기</a>
        <div class="flex items-center gap-2">
          <input type="date" id="datePicker" class="border border-slate-200 rounded-xl px-3 py-2 bg-white" />
          <button id="btnLoad" class="btn">조회</button>
        </div>
      </div>
    </div>
  </header>

  <!-- 선택/저장 바 -->
  <div class="stickyBar max-w-[1440px] mx-auto px-2 mt-3">
    <div class="card p-3">
      <div class="flex items-center justify-between gap-3 flex-wrap">
        <div class="flex items-center gap-2 flex-wrap">
          <div class="font-extrabold text-slate-900">선택한 기사</div>
          <span class="chip">최대 3개</span>
          <span class="muted small">선택 후 저장하면 Main ‘국보급 소식(대표님 추천)’ 3건에 노출</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="btnLoadPicked" class="btn2">시트 불러오기</button>
          <button id="btnClear" class="btn2">선택 초기화</button>
          <button id="btnSave" class="btn">저장</button>
        </div>
      </div>
      <div class="divider my-3"></div>

      <div id="pickedList" class="flex flex-wrap gap-2">
        <span class="muted small">아직 선택된 기사가 없습니다.</span>
      </div>

      <div class="mt-2 text-xs muted" id="saveStatus"></div>
    </div>
  </div>

  <main class="max-w-[1440px] mx-auto px-2 py-6 space-y-6">
    <div class="card p-4">
      <div class="flex items-start justify-between gap-4 flex-wrap">
        <div>
          <div class="font-semibold text-slate-900">기사 목록 (news 페이지와 동일)</div>
          <div class="muted small">선택한 날짜 기준(±1일) 최신 기사 5건씩 노출 · 각 기사 우측 “선택” 버튼</div>
        </div>
        <div class="chip">SOURCE: Google News RSS (via Cloudflare Worker)</div>
      </div>
      <div class="divider my-3"></div>
      <div id="news-container" class="space-y-5"></div>
      <div id="debugBox" class="mt-4 text-xs muted"></div>
    </div>
  </main>

  <div id="toast" class="toast"></div>

<script>
/** ✅ Cloudflare Worker 주소 */
const PROXY_BASE = "https://eis.qkr3069.workers.dev";

/** ✅ Apps Script WebApp URL (너가 준 것) */
const SHEET_API = "https://script.google.com/macros/s/AKfycbwgDbjAC90L_0M_muN31QM1n-UbBCG5wXnvM7t0EQh3aGwCEbQd_5W05gSl7OuQ9Ds/exec";

/* ===================== FEEDS ===================== */
const feeds = {
  "건강검진": "https://news.google.com/rss/search?q=건강검진&hl=ko&gl=KR&ceid=KR:ko",
  "검진센터 소식": "https://news.google.com/rss/search?q=KMI+OR+한국의학연구소+OR+건강관리협회+OR+하나로의료재단+OR+메디플러스+OR+메디피아+OR+SCL+OR+세종365의원+OR+대청병원+OR+천안우리병원&hl=ko&gl=KR&ceid=KR:ko",
  "경쟁사 소식": "https://news.google.com/rss/search?q=GC케어+OR+어떠케어+OR+에임매드+OR+착한의사+OR+비바이노베이션+OR+케어링크+OR+케어랩스+OR+레몬헬스케어+OR+유비케어+OR+살루스케어+OR+카카오헬스케어&hl=ko&gl=KR&ceid=KR:ko",
  "헬스케어": "https://news.google.com/rss/search?q=헬스케어&hl=ko&gl=KR&ceid=KR:ko",
  "웰니스": "https://news.google.com/rss/search?q=웰니스&hl=ko&gl=KR&ceid=KR:ko",
  "웨어러블": "https://news.google.com/rss/search?q=갤럭시워치+OR+애플워치+OR+스마트워치+OR+핏빗+OR+워치&hl=ko&gl=KR&ceid=KR:ko",
  "주요 소식(국내)": "https://news.google.com/rss?hl=ko&gl=KR&ceid=KR:ko",
  "주요 소식(국외)": "https://news.google.com/rss?hl=en-US&gl=US&ceid=US:en"
};

function stripHtml(s){ return (s || "").replace(/<[^>]+>/g, " ").replace(/\s+/g, " ").trim(); }
function debug(msg){ const box = document.getElementById("debugBox"); if(box) box.innerHTML += `<div>• ${msg}</div>`; }
function toast(msg){
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"), 1800);
}

/* ===================== DATE FILTER ===================== */
function parseYMD(v){
  const [a,b,c] = (v||"").split("-").map(Number);
  if(!a || !b || !c) return null;
  return new Date(a, b-1, c, 0,0,0,0);
}
function parseItemDate(dt){
  if(!dt) return null;
  const d = new Date(dt);
  if(!Number.isNaN(d.getTime())) return d;
  return null;
}
function passDateFilter(pubDate, sel){
  const selD = parseYMD(sel);
  if(!selD) return true;
  const itemD = parseItemDate(pubDate);
  if(!itemD) return true;
  const a = new Date(selD.getFullYear(), selD.getMonth(), selD.getDate()).getTime();
  const b = new Date(itemD.getFullYear(), itemD.getMonth(), itemD.getDate()).getTime();
  return Math.abs(a - b) <= 86400000;
}
function formatPub(pubDate){
  const d = new Date(pubDate);
  if(Number.isNaN(d.getTime())) return "";
  const y = d.getFullYear();
  const m = String(d.getMonth()+1).padStart(2,"0");
  const dd = String(d.getDate()).padStart(2,"0");
  return `${y}-${m}-${dd}`;
}

/* ===================== RSS via Worker ===================== */
async function fetchRSSRaw(rssUrl){
  const proxy = `${PROXY_BASE}/rss?url=` + encodeURIComponent(rssUrl);
  const r = await fetch(proxy, { cache: "no-store" });
  if(!r.ok) throw new Error("proxy failed: " + r.status);
  return r.text();
}
function textOf(parent, selector){
  const el = parent.querySelector(selector);
  return el ? (el.textContent || "").trim() : "";
}
function firstLinkOfItem(itemEl){
  const atomLink = itemEl.querySelector('link[href]');
  if(atomLink && atomLink.getAttribute("href")) return atomLink.getAttribute("href").trim();
  const rssLink = textOf(itemEl, "link");
  if(rssLink) return rssLink;
  const guid = textOf(itemEl, "guid");
  if(guid && /^https?:\/\//i.test(guid)) return guid;
  return "";
}
function parseRSSItems(xmlText){
  const parser = new DOMParser();
  const doc = parser.parseFromString(xmlText, "text/xml");
  const errNode = doc.querySelector("parsererror");
  if(errNode) throw new Error("XML parse error");

  const items = [];
  const rssItems = Array.from(doc.querySelectorAll("item"));
  if(rssItems.length){
    for(const it of rssItems){
      const title = textOf(it, "title");
      const link = firstLinkOfItem(it);
      const pubDate = textOf(it, "pubDate") || textOf(it, "date");
      const description = textOf(it, "description") || textOf(it, "content\\:encoded");
      if(title || link) items.push({ title, link, pubDate, description });
    }
    return items;
  }
  const atomEntries = Array.from(doc.querySelectorAll("entry"));
  for(const en of atomEntries){
    const title = textOf(en, "title");
    let link = "";
    const l = en.querySelector('link[rel="alternate"][href]') || en.querySelector('link[href]');
    if(l) link = (l.getAttribute("href") || "").trim();
    const pubDate = textOf(en, "updated") || textOf(en, "published");
    const description = textOf(en, "summary") || textOf(en, "content");
    if(title || link) items.push({ title, link, pubDate, description });
  }
  return items;
}
async function fetchRssItems(rssUrl){
  const xml = await fetchRSSRaw(rssUrl);
  const items = parseRSSItems(xml);
  return { items };
}

/* ===================== UI helpers ===================== */
function makeSection(cat){
  const sec = document.createElement("section");
  sec.className = "card p-4";
  sec.innerHTML = `
    <div class="flex items-center justify-between gap-3 flex-wrap">
      <div class="flex items-center gap-2">
        <div class="font-semibold text-slate-900">${escapeHtml(cat)}</div>
        <span class="chip">TOP 5</span>
      </div>
      <span class="badge-load" data-badge>LOADING</span>
    </div>
    <div class="divider my-3"></div>
    <div class="space-y-3" data-items>
      <div class="p-3 rounded-2xl bg-slate-50 border border-slate-200 muted small">불러오는 중…</div>
    </div>
    <div class="mt-3 muted small" data-empty style="display:none;">해당 날짜 소식 없음</div>
    <div class="mt-2 muted small" data-error style="display:none;"></div>
  `;
  return sec;
}
function setBadge(sec, kind, text){
  const b = sec.querySelector("[data-badge]");
  b.className = kind === "ok" ? "badge-ok" : kind === "err" ? "badge-err" : "badge-load";
  b.textContent = text;
}

/* ===================== 선택 상태 ===================== */
let picked = []; // [{key,title,link,summary,category,date}]
function makeKey(link, title, cat){
  const base = `${(link||"").trim()}|${(title||"").trim()}|${(cat||"").trim()}`;
  return hash(base);
}
function hash(str){
  let h = 5381;
  for(let i=0;i<str.length;i++) h = ((h<<5)+h) + str.charCodeAt(i);
  return (h>>>0).toString(16);
}
function renderPicked(){
  const el = document.getElementById("pickedList");
  if(!el) return;

  el.innerHTML = "";
  if(picked.length === 0){
    const s = document.createElement("span");
    s.className = "muted small";
    s.textContent = "아직 선택된 기사가 없습니다.";
    el.appendChild(s);
    return;
  }

  picked.forEach(p=>{
    const tag = document.createElement("span");
    tag.className = "pickedTag";
    tag.innerHTML = `
      <span class="truncate max-w-[54vw] md:max-w-[520px]" title="${escapeAttr(p.title)}">${escapeHtml(p.title)}</span>
      <span class="x" data-unpick="${escapeAttr(p.key)}">×</span>
    `;
    el.appendChild(tag);
  });
}
function refreshPickButtons(){
  document.querySelectorAll("[data-pick]").forEach(btn=>{
    const key = btn.getAttribute("data-pick");
    const active = picked.some(p=>p.key===key);
    btn.classList.toggle("active", active);
    btn.textContent = active ? "선택됨" : "선택";
  });
}

/* ===================== HTML escape ===================== */
function escapeHtml(s){
  return String(s||"")
    .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
    .replaceAll('"',"&quot;").replaceAll("'","&#039;");
}
function escapeAttr(s){ return escapeHtml(s).replaceAll('"',"&quot;"); }

/* ===================== API (너의 Apps Script 스펙에 맞춤) ===================== */
/**
 * doGet:  /exec?date=YYYY-MM-DD
 * doPost: form-urlencoded payload=JSON.stringify({date, items})
 */
async function apiGetItems(dateStr){
  const url = SHEET_API
    + (SHEET_API.includes("?") ? "&" : "?")
    + "date=" + encodeURIComponent(dateStr || "")
    + "&t=" + Date.now();
  const r = await fetch(url, { cache:"no-store" });
  if(!r.ok) throw new Error("HTTP " + r.status);
  const data = await r.json();
  if(data && data.error) throw new Error(data.error);
  return data;
}
async function apiSaveItems(dateStr, items){
  // ✅ 프리플라이트 최소화 + 너의 doPost가 기대하는 payload 파라미터로 전송
  const payloadObj = { date: dateStr, items: items };
  const form = new URLSearchParams();
  form.set("payload", JSON.stringify(payloadObj));

  const r = await fetch(SHEET_API, {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
    body: form.toString()
  });

  if(!r.ok) throw new Error("HTTP " + r.status);
  const data = await r.json().catch(()=> ({}));
  if(data && data.error) throw new Error(data.error);
  return data;
}

function setSaveStatus(msg, kind){
  const el = document.getElementById("saveStatus");
  if(!el) return;
  const color = kind==="ok" ? "text-emerald-700" : kind==="err" ? "text-rose-700" : "text-slate-500";
  el.className = `mt-2 text-xs ${color}`;
  el.textContent = msg;
}

/* ===================== Render News ===================== */
function renderOK(sec, items, selDate, cat){
  const listWrap = sec.querySelector("[data-items]");
  const emptyEl = sec.querySelector("[data-empty]");
  const errEl = sec.querySelector("[data-error]");
  listWrap.innerHTML = "";
  emptyEl.style.display = "none";
  errEl.style.display = "none";

  let num = 0;
  for(const it of items){
    if(num >= 5) break;
    if(!passDateFilter(it.pubDate, selDate)) continue;

    const clean = stripHtml(it.description).slice(0, 90);
    const key = makeKey(it.link, it.title, cat);
    const active = picked.some(p => p.key === key);

    const row = document.createElement("div");
    row.className = "p-3 rounded-2xl bg-slate-50 border border-slate-200";
    row.innerHTML = `
      <div class="pickRow">
        <div class="min-w-0">
          <a class="news-link block" href="${it.link || "#"}" target="_blank" rel="noopener">${escapeHtml(it.title || "(제목 없음)")}</a>
          <div class="muted small mt-1">${escapeHtml(clean ? clean + "…" : "")}</div>
          <div class="muted text-xs mt-1">${escapeHtml(cat)} · ${escapeHtml(formatPub(it.pubDate))}</div>
        </div>
        <div class="flex items-center gap-2">
          <button class="pickBtn ${active ? "active":""}" data-pick="${escapeAttr(key)}">
            ${active ? "선택됨" : "선택"}
          </button>
        </div>
      </div>
    `;
    listWrap.appendChild(row);
    num++;
  }

  if(num === 0) emptyEl.style.display = "";
  setBadge(sec, "ok", "OK");
}
function renderERR(sec, msg){
  const listWrap = sec.querySelector("[data-items]");
  const emptyEl = sec.querySelector("[data-empty]");
  const errEl = sec.querySelector("[data-error]");
  listWrap.innerHTML = "";
  emptyEl.style.display = "none";
  errEl.style.display = "";
  errEl.textContent = "불러오기에 실패했습니다: " + msg;
  setBadge(sec, "err", "ERROR");
}

/* ===================== 동시성 제한 ===================== */
async function runWithLimit(tasks, limit){
  const results = new Array(tasks.length);
  let i = 0;
  async function worker(){
    while(i < tasks.length){
      const cur = i++;
      try{ results[cur] = { ok:true, val: await tasks[cur]() }; }
      catch(e){ results[cur] = { ok:false, err:e }; }
    }
  }
  await Promise.all(Array.from({length: Math.min(limit, tasks.length)}, worker));
  return results;
}

/* ===================== Load News ===================== */
let loadToken = 0;
async function loadAllNews(){
  const token = ++loadToken;
  document.getElementById("debugBox").innerHTML = "";

  const selDate = document.getElementById("datePicker").value;
  const c = document.getElementById("news-container");
  c.innerHTML = "";

  const entries = Object.entries(feeds);
  const secMap = new Map();

  for(const [cat] of entries){
    const sec = makeSection(cat);
    secMap.set(cat, sec);
    c.appendChild(sec);
  }

  const tasks = entries.map(([cat, url]) => async () => {
    const data = await fetchRssItems(url);
    return { cat, items: data.items };
  });

  const results = await runWithLimit(tasks, 2);
  if(token !== loadToken) return;

  results.forEach((r, idx) => {
    const cat = entries[idx][0];
    const sec = secMap.get(cat);

    if(r.ok){
      renderOK(sec, r.val.items, selDate, cat);
      debug(`${cat}: OK items=${r.val.items.length}`);
    } else {
      renderERR(sec, r.err?.message || String(r.err));
      debug(`${cat}: FAIL ${r.err?.message || r.err}`);
    }
  });

  bindPickButtons();
}

/* ===================== Pick/Unpick ===================== */
function bindPickButtons(){
  document.querySelectorAll("[data-pick]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const key = btn.getAttribute("data-pick");

      const idx = picked.findIndex(p=>p.key===key);
      if(idx >= 0){
        picked.splice(idx,1);
        toast("선택 해제");
      }else{
        if(picked.length >= 3){
          toast("최대 3개까지 선택 가능합니다.");
          return;
        }
        const card = btn.closest(".p-3");
        const a = card ? card.querySelector("a.news-link") : null;
        const title = a ? a.textContent.trim() : "(제목 없음)";
        const link = a ? a.getAttribute("href") : "";
        const summaryEl = card ? card.querySelector(".muted.small.mt-1") : null;
        const summary = summaryEl ? summaryEl.textContent.trim().replace(/…$/,"") : "";
        const metaEl = card ? card.querySelector(".muted.text-xs.mt-1") : null;
        const meta = metaEl ? metaEl.textContent.trim() : "";
        const [category, date] = meta.split("·").map(s=> (s||"").trim());

        picked.push({ key, title, link, summary, category: category||"", date: date||"" });
        toast("선택 완료");
      }

      renderPicked();
      refreshPickButtons();
    }, { once:true });
  });

  document.getElementById("pickedList").addEventListener("click", (e)=>{
    const t = e.target;
    if(!(t instanceof HTMLElement)) return;
    const key = t.getAttribute("data-unpick");
    if(!key) return;
    picked = picked.filter(p=>p.key !== key);
    renderPicked();
    refreshPickButtons();
    toast("선택 해제");
  });
}

/* ===================== 시트 불러오기 ===================== */
async function loadPickedFromSheet(){
  try{
    const dateStr = document.getElementById("datePicker").value;
    setSaveStatus(`시트에서 불러오는 중… (${dateStr})`, "load");

    const data = await apiGetItems(dateStr);
    const items = (data && data.items) ? data.items : [];

    picked = (items || []).slice(0,3).map(it=>{
      const category = String(it.category || it.cat || "").trim();
      const title = String(it.title || "").trim();
      const link = String(it.link || it.url || "").trim();
      const summary = String(it.summary || it.desc || "").trim();
      const date = String(it.date || "").trim();
      const key = makeKey(link, title, category);
      return { key, title, link, summary, category, date };
    });

    renderPicked();
    setSaveStatus("불러오기 완료", "ok");
    toast("시트 불러오기 완료");
    refreshPickButtons();
  }catch(err){
    console.warn(err);
    setSaveStatus("불러오기 실패: " + (err?.message || err), "err");
    toast("불러오기 실패");
  }
}

/* ===================== 저장 ===================== */
async function savePickedToSheet(){
  try{
    const dateStr = document.getElementById("datePicker").value;

    if(picked.length !== 3){
      toast("3개를 선택한 뒤 저장해 주세요.");
      setSaveStatus("저장 실패: 3개 선택 필요", "err");
      return;
    }

    setSaveStatus(`저장 중… (${dateStr})`, "load");

    // ✅ 너의 Apps Script가 저장하는 구조는 items 배열 그대로 JSON string으로 저장함
    const items = picked.map(p=>({
      title: p.title,
      link: p.link,
      summary: p.summary,
      category: p.category,
      date: p.date
    }));

    const res = await apiSaveItems(dateStr, items);
    if(res && res.ok){
      setSaveStatus("저장 완료", "ok");
      toast("저장 완료");
    }else{
      setSaveStatus("저장 실패: 응답 확인 필요", "err");
      toast("저장 실패");
    }
  }catch(err){
    console.warn(err);
    setSaveStatus("저장 실패: " + (err?.message || err), "err");
    toast("저장 실패");
  }
}

/* ===================== init ===================== */
window.onload = () => {
  document.getElementById("datePicker").value = new Date().toISOString().slice(0,10);

  document.getElementById("btnLoad").addEventListener("click", loadAllNews);
  document.getElementById("btnSave").addEventListener("click", savePickedToSheet);
  document.getElementById("btnLoadPicked").addEventListener("click", loadPickedFromSheet);
  document.getElementById("btnClear").addEventListener("click", ()=>{
    picked = [];
    renderPicked();
    refreshPickButtons();
    toast("선택 초기화");
  });

  renderPicked();
  loadAllNews();
};
</script>
</body>
</html>
